"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),function(t){try{t=angular.module("stamp")}catch(e){t=angular.module("stamp",[])}t.run(["$templateCache",function(t){t.put("src/angular/templates/editor.html",'<div class="stamp-stack-container">\n  <div class="stack-block block-{{$index}}" data-ng-repeat="block in blocks">\n    <stamp-block data="block"></stamp-block>\n  </div>\n  <div class="no-config" data-ng-id="blocks.length == 0">No Blocks</div>\n  <div data-ng-if="!locked && !readOnly"><input class="btn btn-default" type="button" value="+ Block" data-ng-click="addBlock()"></div>\n</div>')}])}(),function(){var t=angular.module("stamp.mappers",[]);t.factory("json",function(){function t(t){}function e(e){try{return t(e)}catch(n){return}}return{to:function(t){return console.log("TODO: Write stamp.mappers: json.to"),e(t)}}})}(),function(t){try{t=angular.module("stamp")}catch(e){t=angular.module("stamp",[])}t.run(["$templateCache",function(t){t.put("src/angular/templates/row.html",'<div data-ng-if="!locked"><input class="btn btn-default" type="button" data-ng-click="addComponent()">+ Add Component</div>')}])}();var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();!function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.name=e,this.group=n}return _createClass(t,null,[{key:"validate",value:function(t){return!0}}]),t}(),e=function(){function t(e){_classCallCheck(this,t),this.name=e}return _createClass(t,null,[{key:"validate",value:function(t){return!0}}]),t}(),n=function(){function t(e){_classCallCheck(this,t),this.blocks=[]}return _createClass(t,[{key:"get",value:function(){throw new Error("NotImplementedException")}},{key:"add",value:function(){throw new Error("NotImplementedException")}},{key:"move",value:function(){throw new Error("NotImplementedException")}},{key:"remove",value:function(){throw new Error("NotImplementedException")}},{key:"length",get:function(){return this.blocks.length}}]),t}(),o=function(){function t(e,n){_classCallCheck(this,t),this.components=[],this.attrs=n}return _createClass(t,[{key:"add",value:function(t){this.components.push(t)}},{key:"remove",value:function(t){var e=this.components.splice(t,1);e=null}}]),t}(),a=(function(){function e(t){_classCallCheck(this,e),this.attributes=Object.assign({locked:!1,readOnly:!1},t),this.stack=new n(this)}return _createClass(e,[{key:"exportJSON",value:function(){throw new Error("NotImplementedException")}},{key:"importJSON",value:function(t){throw new Error("NotImplementedException")}},{key:"addBlock",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.stack.length:arguments[0],e=arguments[1];this.stack.add(t,new StackItem(e))}},{key:"removeBlock",value:function(t){void 0!==t&&this.stack.remove(t)}},{key:"moveBlock",value:function(t,e){void 0!==t&&void 0!==e&&this.stack.move(t,e)}},{key:"addComponent",value:function(e,n){if(!t.validate(n))return"Not A Valid Stamp Component";var o=this.stack.get(e);return o?void o.add(n):"Not A Valid Stack Index"}},{key:"removeComponent",value:function(t,e){var n=this.stack.get(t);return n?void n.remove(e):"Not A Valid Stack Index"}}]),e}(),angular.module("stamp.models",[]));a.value("Component",t),a.value("Layout",e),a.value("Stack",n),a.value("Block",o)}(),function(){var t=angular.module("stamp",["stamp.models","stamp.mappers","stampSetup"]);t.value("stampConfig",{}),t.directive("stampEditor",["$rootScope","$compile","$timeout","$window","stampConfig",function(t,e,n,o,a){a=a||{};var l=0,r="ui-stamp-editor-";return{require:["ngModel"],templateUrl:"../src/angular/templates/editor.html",link:function(t,e,n,o){var c=(o[0],{}),i={};t.data=t.data||{},n.$set("id",r+l++),console.log("Stamp directive given ID: "+r+l),angular.extend(i,t.$eval(n.stampOptions)),angular.extend(c,a,i),t.attributes=Object.assign({locked:!1,readOnly:!1},t.data.attributes||{}),t.stack=new Stack(t.data.stack)},controller:["$scope",function(t){this.addBlock=function(t,e){console.log("Called addBlock on editor. TODO"),scope.stack.splice(t||0,0,e)},this.removeBlock=function(e){if(console.log("Called removeBlock on editor. TODO"),void 0!==e){var n=t.components.splice(e,1);n=null}},this.moveBlock=function(t,e){return console.log("Called moveBlock on editor. TODO"),void 0===t||void 0===e||e>scope.stack.length?void console.log("Invalid block move operation"):void scope.stack.splice(e,0,scope.stack.splice(t,1)[0])}}]}}]),t.directive("stampBlock",["$compile",function(t){return{restrict:"E",require:"^stampEditor",templateUrl:"src/angular/templates/block.html",scope:{data:"="},link:function(t,e,n,o){t.components=[],t.attributes=Object.assign({},t.data.attributes||{})},controller:["$scope",function(t){this.setLayout=function(t){console.log("Called setLayout on block. TODO")},this.addComponent=function(t,e){console.log("Called addComponent on block. TODO")},this.removeComponent=function(t){console.log("Called removeComponent on block. TODO")},this.moveComponent=function(t,e){console.log("Called removeComponent on block. TODO")}}]}}])}();var Layout=function t(){_classCallCheck(this,t)},OneColumn=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,"One Column"))}return _inherits(e,t),e}(Layout),TwoColumn=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,"Two Columns"))}return _inherits(e,t),e}(Layout),ThreeColumn=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,"Three Columns"))}return _inherits(e,t),e}(Layout),FourColumn=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,"Four Columns"))}return _inherits(e,t),e}(Layout);